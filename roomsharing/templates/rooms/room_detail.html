{% extends "base.html" %}

{% load static i18n %}

{% block title %}
  {% trans "Room" %}: {{ room.name }}
{% endblock title %}
{% block content %}
  <h1 class="mt-4">{{ room.name }}</h1>
  <div class="card mb-3 mt-4">
    <div class="row g-0">
      <div class="col-md-2">
        {% with room.roomimages_of_room.all.0.image.url as img_url %}
          {% if img_url %}
            <img src="{{ img_url }}"
                 class="img-fluid rounded-start"
                 alt="{{ room.name }}" />
          {% else %}
            <img src="..." class="img-fluid rounded-start" alt="..." />
          {% endif %}
        {% endwith %}
      </div>
      <div class="col-md-5">
        <div class="card-body">
          <h5 class="card-title">&nbsp</h5>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">
              <svg class="fs-4 me-1" width="1em" height="1em">
                <use href="#bi-people" />
              </svg>
              Max. {{ room.max_persons }} {% trans "Persons" %} ({{ room.square_meters|default_if_none:"" }}mÂ²)
            </li>
            <li class="list-group-item">
              <svg class="fs-4 me-1" width="1em" height="1em">
                <use href="#bi-calendar2-check" />
              </svg>
              {{ room.bookable_times }}
            </li>
          </ul>
        </div>
      </div>
      <div class="col-md-5">
        <div class="card-body">
          <h5 class="card-title">&nbsp</h5>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">
              <svg class="fs-4 me-1" width="1em" height="1em">
                <use href="#bi-piggy-bank" />
              </svg>
              {% trans "Pricing" %}: {{ room.pricing }}
            </li>
            <li class="list-group-item">
              <svg class="fs-4 me-1" width="1em" height="1em">
                <use href="#bi-easel2" />
              </svg>
              {{ room.included_equipment }}
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <h2 class="mt-4">Bookings</h2>
  <ul>
    {% for booking in bookings %}<li>{{ booking.timespan.lower }} - {{ booking.timespan.upper }}</li>{% endfor %}
  </ul>
  <form autocomplete="off">
    <div class="form-group">
      <input type="button"
             class="form-control form-control-lg mb-4 search-form"
             hx-post="{% url 'rooms:get-weekly-bookings' room.slug %}"
             hx-target='#results'
             hx-trigger="click" />
      Next
    </div>
  </form>
  <div id="results"></div>
{% endblock content %}
