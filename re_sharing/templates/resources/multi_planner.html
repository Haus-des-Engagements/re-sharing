{% extends "base.html" %}

{% load static i18n %}

{% block title %}
  {% trans "Find a free room" %}
{% endblock title %}
{% block content %}
  <h1 class="mt-4">{% trans "Find a free room" %}</h1>
  <div class="mt-3 mb-4">
    <p>
      {% trans "In this view, you can see the free times for all resources. Click on a free (white) slot to go directly to the booking page." %}
    </p>
  </div>
  {% if locations.count > 1 %}
    <div class="alert alert-info" role="alert">
      <p>{% trans "We provide rooms at different locations, please select accordingly:" %}</p>
      <form id="locations"
            hx-get="{% url 'resources:planner' %}"
            hx-target="#selection_and_table"
            hx-indicator="#spinner"
            hx-headers='{"partial": "selection_and_table"}'
            hx-push-url="true"
            hx-swap="innerHTML"
            hx-trigger="change">
        <div class="col-auto" id="div_id_location">
          <label for="id_location" class="form-label visually-hidden">{% trans "Location" %}</label>
          <select name="location"
                  class="select form-select form-select"
                  id="id_location">
            <option value="">{% trans "All locations" %}</option>
            {% for location in locations %}
              <option value="{{ location.slug }}"
                      {% if location.slug == location_slug %}selected{% endif %}>
                {{ location.name }} ({{ location.address }})
              </option>
            {% endfor %}
          </select>
        </div>
      </form>
    </div>
  {% endif %}
  <div class="mt-4 mb-3" id="selection_and_table">{% include "resources/partials/selection_and_table.html" %}</div>
{% endblock content %}
