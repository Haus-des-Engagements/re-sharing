{% extends "base.html" %}

{% load static i18n %}

{% block title %}
  {% trans "Organizations" %}
{% endblock title %}
{% block content %}
  <div class="row mt-5 mb-4">
    <div>
      <h1>
        {% trans "Organizations" %}
        <a class="btn btn-outline-primary"
           href="{% url 'organizations:create-organization' %}"
           role="button">
          <svg width="1em" height="1em">
            <use href="#bi-plus-lg" />
          </svg>
          {% trans "New Organization" %}
        </a>
      </h1>
    </div>
    <div class="row">
      <p>{% trans "Here you can find all organizations, that decided to share some information publicly." %}</p>
    </div>
  </div>
  <div class="row">
    <div id="div_persons_count" class=" col-3">
      <input type="text"
             name="organization_name"
             class="form-control"
             placeholder="{% trans 'Search organizations' %}"
             id="organization_name"
             hx-get="{% url 'organizations:list-organizations' %}"
             hx-target="#list-organizations"
             hx-trigger="keyup"
             hx-indicator="#spinner" />
    </div>
    <div id="spinner"
         class="spinner-border col-auto htmx-indicator"
         role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
  <div id="list-organizations" class="mt-4">{% partial organization-list %}</div>
{% endblock content %}
{% partialdef organization-list %}
{% for organization in organizations %}
  <div class="card mb-3">
    <div class="row g-0">
      <div class="col-md-8">
        <div class="card-body">
          <a class="card-title"
             href="{% url 'organizations:show-organization' organization=organization.slug %}">{{ organization.name }}
          </a>
        </div>
      </div>
    </div>
  </div>
{% endfor %}
{% endpartialdef %}
